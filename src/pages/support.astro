---
import BaseLayout from "../layouts/BaseLayout.astro";
import { render } from "astro:content";
import { getSiteBySlug } from "../lib/content";
import { type LangPrefix, type SiteLang } from "../lib/i18n";
import { getUiStrings } from "../i18n/strings";

interface Props {
  lang?: SiteLang;
  pathPrefix?: LangPrefix;
}

const { lang = "de", pathPrefix = "" } = Astro.props;
const ui = getUiStrings(lang);

const supportEntry = await getSiteBySlug("support", lang);
const SupportContent = supportEntry ? (await render(supportEntry)).Content : null;
---

<BaseLayout title={ui.pages.support.seoTitle} description={ui.pages.support.seoDescription} lang={lang} pathPrefix={pathPrefix}>
  <section class="space-y-4 rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
    {SupportContent ? (
      <div class="content-markdown">
        <SupportContent />
      </div>
    ) : (
      <>
        <h1 class="text-3xl font-semibold">{ui.pages.support.fallbackTitle}</h1>
        <p class="text-slate-700">{ui.pages.support.fallbackBody}</p>
      </>
    )}
  </section>
</BaseLayout>
