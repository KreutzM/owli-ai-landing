---
import type { CollectionEntry } from "astro:content";

interface Props {
  partner: CollectionEntry<"partners">;
}

const { partner } = Astro.props;
const titleId = `partner-${partner.data.slug}-title`;
const initials = partner.data.name
  .split(" ")
  .filter(Boolean)
  .slice(0, 2)
  .map((part) => part[0]?.toUpperCase() ?? "")
  .join("");
---

<article
  aria-labelledby={titleId}
  class="group flex h-full flex-col rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md"
>
  <div class="mb-4 flex items-start gap-4">
    {
      partner.data.logo ? (
        <img
          src={partner.data.logo}
          alt={`Logo von ${partner.data.name}`}
          width="112"
          height="112"
          class="h-20 w-20 shrink-0 rounded-xl border border-slate-200 bg-white object-contain p-2 sm:h-24 sm:w-24"
          loading="lazy"
          decoding="async"
        />
      ) : (
        <div
          class="flex h-20 w-20 shrink-0 items-center justify-center rounded-xl border border-slate-300 bg-slate-100 text-lg font-semibold text-slate-700 sm:h-24 sm:w-24"
          aria-hidden="true"
        >
          {initials}
        </div>
      )
    }
    <div class="space-y-1">
      <h3 id={titleId} class="text-2xl font-semibold leading-tight tracking-tight">{partner.data.name}</h3>
      <p class="text-xs font-semibold uppercase tracking-wide text-slate-600">{partner.data.category}</p>
    </div>
  </div>

  <p class="text-sm text-slate-700">{partner.data.shortDescription}</p>

  <ul class="mt-4 list-disc space-y-2 pl-5 text-sm text-slate-700">
    {partner.data.bullets.map((bullet) => <li>{bullet}</li>)}
  </ul>

  <div class="mt-5">
    <a
      href={partner.data.website}
      target="_blank"
      rel="noopener noreferrer"
      class="btn-brand inline-flex items-center rounded-full border px-4 py-2 text-sm font-semibold transition"
    >
      Offizielle Seite
    </a>
  </div>
</article>
