---
import BrandLogo from "./BrandLogo.astro";

const navItems = [
  { href: "/", label: "Start" },
  { href: "/apps", label: "Apps" },
  { href: "/support", label: "Support" },
  { href: "/privacy", label: "Datenschutz" },
  { href: "/imprint", label: "Impressum" },
  { href: "/accessibility", label: "Barrierefreiheit" }
];

const currentPath = Astro.url.pathname;
const isActive = (href: string) => {
  if (href === "/") {
    return currentPath === "/";
  }

  return currentPath === href || currentPath.startsWith(`${href}/`);
};
---

<header class="border-b border-slate-200 bg-white">
  <div class="mx-auto flex max-w-6xl items-center justify-between gap-4 px-4 py-3 sm:px-6 lg:px-8">
    <a class="flex items-center gap-2.5 font-semibold tracking-tight" href="/" aria-label="Owli-AI Startseite">
      <BrandLogo
        alt="Owli-AI Logo"
        width={36}
        height={36}
        className="h-9 w-9 rounded object-contain"
        priority={true}
      />
      <span class="text-lg">Owli-AI</span>
    </a>

    <nav class="hidden md:block" aria-label="Hauptnavigation">
      <ul class="flex items-center gap-3 text-[0.95rem] font-medium">
        {
          navItems.map((item) => (
            <li>
              <a
                href={item.href}
                class:list={[
                  "rounded-lg border border-transparent px-3 py-1.5 transition",
                  isActive(item.href) ? "nav-active" : "hover:bg-slate-100"
                ]}
                aria-current={isActive(item.href) ? "page" : undefined}
              >
                {item.label}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>

    <details class="md:hidden">
      <summary class="cursor-pointer rounded border border-slate-300 px-3 py-1 text-sm">MenÃ¼</summary>
      <nav class="absolute right-4 z-20 mt-2 w-52 rounded border border-slate-200 bg-white p-2 shadow" aria-label="Mobile Navigation">
        <ul class="space-y-1 text-sm">
          {
            navItems.map((item) => (
              <li>
                <a
                href={item.href}
                class:list={[
                    "block rounded border border-transparent px-2 py-2 transition",
                    isActive(item.href) ? "nav-active" : "hover:bg-slate-100"
                  ]}
                  aria-current={isActive(item.href) ? "page" : undefined}
                >
                  {item.label}
                </a>
              </li>
            ))
          }
        </ul>
      </nav>
    </details>
  </div>
</header>
